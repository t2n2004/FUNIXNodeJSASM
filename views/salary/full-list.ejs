<%- include('../includes/head.ejs') %>

</head>

<body>
  <%- include('../includes/navigations.ejs') %>

  <form class="product-form" method="POST">
    <div class="form-control">
      <label for="category">Choose category</label>
      <select class="form-select" id="category" name="category">
        <option value="workplace">Workplace</option>
        <option value="startedAt">Start date</option>
        <option value="endedAt">End date</option>      
      </select>
    </div>

    <div class="form-control">
        <label for="keyword">Enter your keyword</label>
        <input type="text" name="keyword" id="keyword">
    </div>
    
    <input type="hidden" name="_csrf" value="<%= csrfToken %>">
    <button class="btn" type="submit">Apply</button>
  </form>

    <h1>This is Full List of TimeLog</h1>
    <% if (data) { %>
      <div>
        <% if (data.length > 0) { %>
          <div class="card">
            <ul class="list-group list-group-flush">
              <% for( let index = 0; index < data.length; index++ ) { %>
                <li><%= data[index].date %></li>
                <% if (data[index].dayLogs.length > 0 ) { %>
                  <ul class="list-group list-group-flush">
                    <% for (let i = 0; i < data[index].dayLogs.length; i++ ) { %>
                      <li class="list-group-item">Start: <%= data[index].dayLogs[i].startedAt %>  - End: <%= data[index].dayLogs[i].endedAt %> - Workplace: <%= data[index].dayLogs[i].workplace %> </li>
                    <% } %> 
                  </ul>
                <% } else { %>
                  <p>No time logs this day!</p>
                <% } %>

                <ul class="list-group list-group-flush">
                  <li class="list-group-item">Total working: <%= data[index].working %>h </li>
                  <li class="list-group-item">Total leave: <%= data[index].leave %>h </li>
                  <li class="list-group-item">Total overTime: <%= data[index].overTime %>h </li>
                </ul>
                      
              <% } %>
            </ul>
          </div>
        <% } else { %>
          <p>No time logs found!</p>
        <% } %>
      </div>

    <% } %> 
       
  </main>
</body>

<%- include('../includes/end.ejs') %>